# پروژه WebGIS

این پروژه یک اپلیکیشن WebGIS است که با استفاده از Flask و Leaflet ساخته شده و یک لایه WMS از GeoServer را ادغام می‌کند. این پروژه شامل احراز هویت، رابط نقشه و قابلیت بازیابی اطلاعات ویژگی‌ها با کلیک بر روی نقشه است.

## ویژگی‌ها

- **احراز هویت کاربر**
  - صفحات ورود و ثبت‌نام با اعتبارسنجی فرم.
  - احراز هویت مبتنی بر کوکی.
  - صفحه نقشه که فقط برای کاربران وارد شده در دسترس است.
  
- **نقشه با لایه WMS**
  - از Leaflet برای نمایش نقشه با یک لایه پایه (OSM) و لایه WMS از GeoServer استفاده شده است.
  -  با کلیک روی هر ویژگی در لایه WMS، ویژگی‌های آن در یک جدول نمایش داده می‌شود :GetFeatureInfo

- **ویژگی‌های اضافی**
  - نمایش اطلاعات ویژگی در یک جدول ریسپانسیو کنار نقشه.
  - امکان نمایش چندین لایه از GeoServer.
  - رابط کاربری ساده و مرتب با طراحی مینیمالیستی.

## دستورالعمل‌های راه‌اندازی

1. **کلون کردن ریپازیتوری:**

    ```bash
    git clone https://github.com/mahya-saedi/webgis-project3.git
    ```

2. **نصب وابستگی‌های مورد نیاز:**

    ```bash
    cd webgis-project3
    python -m venv venv
    venv\Scripts\activate  # برای ویندوز
    pip install -r requirements.txt
    ```

3. **اجرای اپلیکیشن:**

    ```bash
    python app.py
    ```

4. در مرورگر خود وارد `http://127.0.0.1:5000` شوید.

## پیکربندی GeoServer

مطمئن شوید که GeoServer برای دسترسی به لایه WMS پیکربندی شده است:

- آدرس URL لایه WMS در GeoServer: `https://ows.terrestris.de/osm/service`
- نام لایه: `OSM-WMS`

## مشکلات شناخته شده

1. **عدم دریافت اطلاعات از سرور GeoServer**: در برخی موارد، اطلاعات از سرور برگشت داده نمی‌شود، احتمالاً به دلیل پیکربندی نادرست یا پاسخ ندادن سرور به درخواست‌ها.

2. **مشکل در نمایش اطلاعات در جدول**: اطلاعات دریافتی از سرور ممکن است به درستی نمایش داده نشود، معمولاً به دلیل اشکال در تجزیه داده‌ها یا فرمت نادرست.

3. **مشکلات هماهنگی لایه‌های WMS با Leaflet**: گاهی لایه‌ها با Leaflet هماهنگ نمی‌شوند و نقشه به درستی بارگذاری نمی‌شود.

4. **مشکلات با درخواست‌های حجیم**: هنگام ارسال درخواست‌های بزرگ، ممکن است سرور نتواند پاسخ دهد یا با مشکل مواجه شود.

## راه‌حل‌های مشکلات

1. **عدم دریافت اطلاعات از سرور GeoServer**:
   - اطمینان حاصل کردیم که تنظیمات WMS سرور به درستی انجام شده است. همچنین، بررسی کردیم که URL درخواست‌ها صحیح باشد.
   - با استفاده از ابزارهای توسعه‌دهنده (DevTools) در مرورگر، درخواست‌ها را بررسی کرده و مطمئن شدیم که سرور پاسخ می‌دهد.

2. **مشکل در نمایش اطلاعات در جدول**:
   - کد دریافت اطلاعات را بررسی و به‌روزرسانی کردیم تا مطمئن شویم که داده‌ها به درستی از سرور دریافت و در HTML به صورت مناسب نمایش داده شوند.
   - از توابع جاوااسکریپت مناسب برای پردازش داده‌ها استفاده کردیم تا از بروز خطا در تجزیه و نمایش اطلاعات جلوگیری کنیم.

3. **مشکلات هماهنگی لایه‌های WMS با Leaflet**:
   - اطمینان حاصل کردیم که پارامترهای درست برای درخواست‌های WMS به سرور ارسال می‌شود و نقشه به درستی بارگذاری می‌شود.
   - از تنظیمات صحیح برای شفافیت و فرمت تصویر استفاده کردیم تا لایه‌ها به درستی نمایش یابند.

4. **مشکلات با درخواست‌های حجیم**:
   - درخواست‌ها را برای بارگذاری داده‌ها بهینه کردیم و تعداد ویژگی‌های دریافتی را محدود کردیم تا حجم داده‌ها کاهش یابد.

تا جایی که ممکن بود، این مشکلات برطرف شدند و پروژه به صورت کارآمد و با خطای کم در حال اجراست.

## اعتبارها

- **استاد درس:** دکتر آل شیخ
- ** درسTA:** آقای مهندس نظری
- **پروژه توسعه داده شده توسط:** خانم ساعدی و آقای راشدی
